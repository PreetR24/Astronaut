# Astronaut Daily Schedule Organizer (TypeScript CLI)

A console-based TypeScript application to manage an astronaut's daily tasks. It demonstrates clean architecture, tests, and three design patterns: Singleton, Factory and Observer.

This repository contains a fully runnable CLI, durable persistence, and an automated test-suite covering edge cases (invalid times, overlap detection, edit conflicts, etc.).

---

## Quick start

Requirements

- Node.js 18+ and npm

Install and run tests:

```powershell
cd astronaut-schedule
npm install
npm test
```

Run the interactive CLI:

```powershell
npm run start
```

Run the non-interactive smoke demo (useful for automated demos):

```powershell
npx ts-node src/cliRunner.ts
```

Data persistence

- Tasks persist to `./data/tasks.json` by default. The app saves changes with retry/backoff to tolerate transient IO errors.

---

## Commands (interactive)

- add "description" HH:mm HH:mm [High|Medium|Low]
- remove <id|description>
- view [--priority High|Medium|Low]
- edit <id> [--desc "..."] [--start HH:mm] [--end HH:mm] [--priority High]
- complete <id|description>
- help
- exit

Example session

```
add "Morning Exercise" 07:00 08:00 High
add "Team Meeting" 09:00 10:00 Medium
view
complete <id|description>
remove <id|description>
exit
```

When adding or editing tasks the app validates time format (HH:mm, 00:00–23:59), ensures start < end and rejects overlapping tasks.

---

## Architecture & Patterns

- Singleton: `ScheduleManager` (`src/app/patterns/singleton/scheduleManager.ts`) — central in-memory store for tasks with persistence hooks.
- Factory: `TaskFactory` (`src/app/factories/taskFactory.ts`) — creates validated `Task` objects.
- Observer: `Notifier` interface + `ConsoleNotifier` (`src/app/patterns/observer/`) — schedule events (task_added, task_conflict, task_removed, task_completed) are published to observers.
- Logger: `src/app/logger/logger.ts` (winston) — used across modules for info/warn/error logging.

Files of interest

- `src/index.ts` — CLI entry (readline)
- `src/app/controllers/scheduleController.ts` — command parsing & handlers
- `src/app/models/task.ts` — Task shape and validation
- `src/app/patterns/singleton/scheduleManager.ts` — core manager (Singleton)
- `src/app/services/persistenceService.ts` — JSON persistence with retry/backoff
- `src/tests` — unit tests and edge case coverage

---

## Testing

- Unit tests use Jest + ts-jest. Tests include overlap detection, factory validation, ScheduleManager behavior (add/edit/remove/complete), and many edge cases (invalid times, editing into conflicts, removing non-existent tasks).

Run tests:

```powershell
npm test
```

Coverage is generated by the test run and available in `coverage/lcov-report` after tests run locally.

---

## Persistence & Durability

- Persistence is intentionally simple (JSON on disk) to keep the project focused and portable.
- Writes are performed with retries and exponential backoff. For production or multi-process use consider:
  - Using atomic write (write to temp file then rename).
  - Switch to a single-writer write-queue or a small embedded DB (sqlite/LevelDB) for stronger guarantees.

---

## Improvements to stand out

1. Add a GitHub Actions workflow that runs tests and coverage on every push (fast win for reviewers).
2. Add an integration test that drives the CLI end-to-end and asserts `data/tasks.json` contents.
3. Add ESLint/Prettier and run autofixes; include linting in CI.
4. Replace JSON persistence with sqlite or LowDB for reliability in concurrent scenarios.
5. Add a small README demo script and a short recorded GIF demonstrating add/conflict/edit flows.

---

If you want, I can implement any of the improvements above (CI, atomic writes, integration tests). Tell me which and I’ll add it next.



